"use strict";(self.webpackChunkFE_MS=self.webpackChunkFE_MS||[]).push([[661],{8661:(w,g,r)=>{r.r(g),r.d(g,{AttendanceModule:()=>T});var u=r(6895),m=r(5479),t=r(8274),d=r(4006);function _(s,a){if(1&s&&(t.TgZ(0,"option",45),t._uU(1),t.qZA()),2&s){const n=a.$implicit;t.Q6J("value",n),t.xp6(1),t.Oqu(n)}}function f(s,a){if(1&s&&(t.TgZ(0,"option",45),t._uU(1),t.qZA()),2&s){const n=a.$implicit;t.Q6J("value",n),t.xp6(1),t.Oqu(n)}}function b(s,a){if(1&s){const n=t.EpF();t.TgZ(0,"div",46)(1,"div",47)(2,"h5"),t._uU(3,"Add Employee"),t.qZA(),t.TgZ(4,"div",48)(5,"label",49),t._uU(6,"Name"),t.qZA(),t.TgZ(7,"input",50),t.NdJ("ngModelChange",function(e){t.CHM(n);const i=t.oxw();return t.KtG(i.newEmployee.name=e)}),t.qZA()(),t.TgZ(8,"div",48)(9,"label",49),t._uU(10,"Designation"),t.qZA(),t.TgZ(11,"select",51),t.NdJ("ngModelChange",function(e){t.CHM(n);const i=t.oxw();return t.KtG(i.newEmployee.designation=e)}),t.YNc(12,f,2,2,"option",20),t.qZA()(),t.TgZ(13,"div",52)(14,"button",53),t.NdJ("click",function(){t.CHM(n);const e=t.oxw();return t.KtG(e.closeAddPopup())}),t._uU(15,"Close"),t.qZA(),t.TgZ(16,"button",54),t.NdJ("click",function(){t.CHM(n);const e=t.oxw();return t.KtG(e.addEmployee())}),t._uU(17,"Submit"),t.qZA()()()()}if(2&s){const n=t.oxw();t.xp6(7),t.Q6J("ngModel",n.newEmployee.name),t.xp6(4),t.Q6J("ngModel",n.newEmployee.designation),t.xp6(1),t.Q6J("ngForOf",n.designations)}}function x(s,a){if(1&s){const n=t.EpF();t.TgZ(0,"div",74)(1,"span",75),t._uU(2),t.qZA(),t.TgZ(3,"span",76),t._uU(4),t.qZA(),t.TgZ(5,"span",77),t.NdJ("click",function(){const i=t.CHM(n).index,l=t.oxw(4);return t.KtG(l.removeDate(i))}),t._uU(6,"\u2716"),t.qZA()()}if(2&s){const n=a.$implicit,o=a.index;t.xp6(2),t.hij("",o+1,"."),t.xp6(2),t.Oqu(n)}}function h(s,a){if(1&s&&(t.TgZ(0,"div",48)(1,"strong"),t._uU(2),t.qZA(),t.TgZ(3,"div",72),t.YNc(4,x,7,2,"div",73),t.qZA()()),2&s){const n=t.oxw(3);t.xp6(2),t.hij("Selected Dates (",n.selectedDates.length,"):"),t.xp6(2),t.Q6J("ngForOf",n.selectedDates)}}function v(s,a){if(1&s){const n=t.EpF();t.TgZ(0,"div",46)(1,"div",47)(2,"h5"),t._uU(3,"Update Attendance"),t.qZA(),t.TgZ(4,"label",69),t._uU(5,"Select Dates"),t.qZA(),t.TgZ(6,"input",70),t.NdJ("change",function(e){t.CHM(n);const i=t.oxw(2);return t.KtG(i.addDate(e))}),t.qZA(),t.YNc(7,h,5,2,"div",71),t.TgZ(8,"div",52)(9,"button",53),t.NdJ("click",function(){t.CHM(n);const e=t.oxw(2);return t.KtG(e.closePopup())}),t._uU(10,"Close"),t.qZA(),t.TgZ(11,"button",54),t.NdJ("click",function(){t.CHM(n);const e=t.oxw(2);return t.KtG(e.submitDates())}),t._uU(12,"Submit"),t.qZA()()()()}if(2&s){const n=t.oxw(2);t.xp6(6),t.Q6J("max",n.today),t.xp6(1),t.Q6J("ngIf",n.selectedDates.length>0)}}function y(s,a){if(1&s){const n=t.EpF();t.TgZ(0,"div",55)(1,"div",56)(2,"div",57)(3,"div",58)(4,"div",59),t._uU(5),t.qZA(),t.TgZ(6,"div",60),t._uU(7),t.qZA(),t.TgZ(8,"div")(9,"div",61),t._uU(10),t.qZA(),t.TgZ(11,"div",62),t._uU(12),t.qZA()()(),t.TgZ(13,"div",63)(14,"span",64),t.NdJ("click",function(){t.CHM(n);const e=t.oxw();return t.KtG(e.openPopup())}),t._uU(15,"edit"),t.qZA(),t.TgZ(16,"span",65),t._uU(17),t.qZA()()(),t.YNc(18,v,13,2,"div",27),t.TgZ(19,"div",66)(20,"div",67)(21,"button",68),t.NdJ("click",function(){const i=t.CHM(n).$implicit,l=t.oxw();return t.KtG(l.markAttendance(i,"Full Day"))}),t._uU(22,"Full Day"),t.qZA()(),t.TgZ(23,"div",67)(24,"button",68),t.NdJ("click",function(){const i=t.CHM(n).$implicit,l=t.oxw();return t.KtG(l.markAttendance(i,"Half Day"))}),t._uU(25,"Half Day"),t.qZA()(),t.TgZ(26,"div",67)(27,"button",68),t.NdJ("click",function(){const i=t.CHM(n).$implicit,l=t.oxw();return t.KtG(l.markAttendance(i,"Late"))}),t._uU(28,"Late"),t.qZA()(),t.TgZ(29,"div",67)(30,"button",68),t.NdJ("click",function(){const i=t.CHM(n).$implicit,l=t.oxw();return t.KtG(l.markAttendance(i,"Absent"))}),t._uU(31,"Absent"),t.qZA()()()()()}if(2&s){const n=a.$implicit,o=a.index,e=t.oxw();t.xp6(5),t.hij("",o+1,"."),t.xp6(2),t.AsE(" ",null==n.name.split(" ")[0]?null:n.name.split(" ")[0].charAt(0),"",(null==n.name.split(" ")[1]?null:n.name.split(" ")[1].charAt(0))||""," "),t.xp6(3),t.Oqu(n.name),t.xp6(2),t.Oqu(n.designation),t.xp6(4),t.Q6J("ngClass",n.status?"custom-badge":"bg-light text-dark"),t.xp6(1),t.hij(" ",n.status?n.status:"Not marked"," "),t.xp6(1),t.Q6J("ngIf",e.isPopupOpen),t.xp6(3),t.Q6J("ngClass","Full Day"===n.status?"btn-success":"btn-outline-success"),t.xp6(3),t.Q6J("ngClass","Half Day"===n.status?"btn-primary":"btn-outline-primary"),t.xp6(3),t.Q6J("ngClass","Late"===n.status?"btn-warning text-dark":"btn-outline-warning"),t.xp6(3),t.Q6J("ngClass","Absent"===n.status?"btn-danger":"btn-outline-danger")}}const C=[{path:"",component:(()=>{const a=class{constructor(){this.employees=[],this.selectedDate=new Date,this.designations=["Supervisor","Manager","Driver","Worker"],this.selectedDates=[],this.isAddPopupOpen=!1,this.newEmployee={id:0,name:"",designation:"",status:null},this.selectedDesignation="",this.searchTerm="",this.emp={name:"John Doe",designation:"Developer",status:""},this.today=(new Date).toISOString().split("T")[0],this.isPopupOpen=!1,this.useselectedDate=""}ngOnInit(){this.employees=[{id:1,name:"John Smith",designation:"Supervisor",status:null},{id:2,name:"Sarah Johnson",designation:"Manager",status:null},{id:3,name:"Mike Brown",designation:"Driver",status:null},{id:4,name:"Priya Desai",designation:"Worker",status:null},{id:5,name:"Ramesh Patil",designation:"Supervisor",status:null},{id:6,name:"Asha More",designation:"Worker",status:null},{id:7,name:"Vikram Rao",designation:"Driver",status:null},{id:8,name:"Sita Kulkarni",designation:"Manager",status:null}]}get filteredEmployees(){const o=this.searchTerm?.trim().toLowerCase()??"";return this.employees.filter(e=>{const i=!this.selectedDesignation||e.designation.toLowerCase()===this.selectedDesignation.toLowerCase(),l=!o||e.name.toLowerCase().includes(o)||e.designation&&e.designation.toLowerCase().includes(o);return i&&l})}get summary(){const o=this.filteredEmployees;return{fullDay:o.filter(c=>"Full Day"===c.status).length,halfDay:o.filter(c=>"Half Day"===c.status).length,late:o.filter(c=>"Late"===c.status).length,absent:o.filter(c=>"Absent"===c.status).length,pending:o.filter(c=>null===c.status).length}}get totalMarked(){return this.employees.filter(o=>null!==o.status).length}markAttendance(o,e){o.status=e}markAllFiltered(o){this.filteredEmployees.forEach(i=>{const l=this.employees.find(p=>p.id===i.id);l&&(l.status=o)})}clearAllFiltered(){this.filteredEmployees.forEach(e=>{const i=this.employees.find(l=>l.id===e.id);i&&(i.status=null)})}saveAttendance(){const o=this.totalMarked;console.log("Saving attendance payload:",this.employees),alert(`Attendance saved for ${o} employee(s).`)}trackByEmployee(o,e){return e.id}openPopup(){this.selectedDates=[],this.isPopupOpen=!0}closePopup(){this.isPopupOpen=!1}addDate(o){const e=o.target.value;e&&!this.selectedDates.includes(e)&&this.selectedDates.push(e),o.target.value=""}removeDate(o){this.selectedDates.splice(o,1)}submitDates(){this.selectedDates.length>0?(this.emp.status=`Updated with ${this.selectedDates.length} dates`,this.closePopup()):alert("Please select at least one date!")}openAddPopup(){this.isAddPopupOpen=!0,this.newEmployee={id:0,name:"",designation:"",status:null}}closeAddPopup(){this.isAddPopupOpen=!1}addEmployee(){if(this.newEmployee.name&&this.newEmployee.designation){const o=this.employees.length>0?Math.max(...this.employees.map(e=>e.id))+1:1;this.employees.push({...this.newEmployee,id:o}),this.closeAddPopup()}else alert("Please fill all fields.")}};let s=a;return a.\u0275fac=function(e){return new(e||a)},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-attendance"]],decls:79,vars:18,consts:[[1,"attendance-page","container","py-3",2,"padding-bottom","96px"],[1,"d-flex","align-items-center","justify-content-between","mb-2"],[1,"btn","btn-light","btn-icon"],[1,"bi","bi-chevron-left"],[1,"text-center","flex-grow-1"],[1,"mb-0","fw-semibold"],[1,"bi","bi-chevron-right"],[1,"row","row-cols-5","g-2","mb-3"],[1,"col"],[1,"summary-tile","text-success","bg-success","bg-opacity-10","text-center"],[1,"count"],[1,"label"],[1,"summary-tile","text-primary","bg-primary","bg-opacity-10","text-center"],[1,"summary-tile","text-warning","bg-warning","bg-opacity-10","text-center"],[1,"summary-tile","text-danger","bg-danger","bg-opacity-10","text-center"],[1,"summary-tile","text-secondary","bg-secondary","bg-opacity-10","text-center"],[1,"row","g-2","align-items-center","mb-3"],[1,"col-4"],[1,"form-select","form-select-sm",3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"col-6"],["type","text","placeholder","Search employees...",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[1,"col-2","d-flex","justify-content-center","align-items-center"],[1,"btn","btn-sm","btn-primary","w-100","d-flex","align-items-center","justify-content-center","gap-1",3,"click"],[1,"material-symbols-outlined"],[1,"d-none","d-md-inline"],["class","custom-popup",4,"ngIf"],[1,"mb-2","small","text-muted"],[1,"bi","bi-people"],[1,"ms-1"],[1,"d-flex","gap-2","flex-wrap","mb-3"],[1,"btn","btn-outline-success","btn-sm",3,"click"],[1,"bi","bi-sun"],[1,"btn","btn-outline-primary","btn-sm",3,"click"],[1,"bi","bi-moon"],[1,"btn","btn-outline-danger","btn-sm",3,"click"],[1,"bi","bi-x-circle"],[1,"btn","btn-outline-secondary","btn-sm",3,"click"],[1,"bi","bi-arrow-clockwise"],["class","card shadow-sm mb-3 rounded-4",4,"ngFor","ngForOf","ngForTrackBy"],[1,"fixed-bottom","bg-white","border-top","p-2"],[1,"container"],[1,"btn","btn-save","w-100",3,"disabled","click"],[1,"bi","bi-save","me-2"],[3,"value"],[1,"custom-popup"],[1,"custom-popup-content"],[1,"mb-3"],[1,"form-label"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-select",3,"ngModel","ngModelChange"],[1,"d-flex","justify-content-end","gap-2"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-primary",3,"click"],[1,"card","shadow-sm","mb-3","rounded-4"],[1,"card-body"],[1,"d-flex","align-items-center","justify-content-between"],[1,"d-flex","align-items-center"],[1,"me-3","fw-bold","text-primary"],[1,"avatar","me-3"],[1,"fw-semibold"],[1,"small","text-muted"],[1,"d-flex","align-items-center","gap-2"],[1,"material-symbols-outlined","cursor-pointer",3,"click"],[1,"badge",3,"ngClass"],[1,"row","g-2","mt-1","attendance-row"],[1,"col-6","col-md-3"],[1,"btn","w-100","btn-option",3,"ngClass","click"],["for","attendanceDate",1,"form-label"],["type","date","id","attendanceDate",1,"form-control","mb-3",3,"max","change"],["class","mb-3",4,"ngIf"],[1,"selected-dates-vertical","mt-2"],["class","date-box",4,"ngFor","ngForOf"],[1,"date-box"],[1,"number"],[1,"date"],[1,"remove",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"button",2),t._UZ(3,"i",3),t.qZA(),t.TgZ(4,"div",4)(5,"h6",5),t._uU(6),t.ALo(7,"date"),t.qZA()(),t.TgZ(8,"button",2),t._UZ(9,"i",6),t.qZA()(),t.TgZ(10,"div",7)(11,"div",8)(12,"div",9)(13,"div",10),t._uU(14),t.qZA(),t.TgZ(15,"div",11),t._uU(16,"Full "),t.qZA()()(),t.TgZ(17,"div",8)(18,"div",12)(19,"div",10),t._uU(20),t.qZA(),t.TgZ(21,"div",11),t._uU(22,"Half "),t.qZA()()(),t.TgZ(23,"div",8)(24,"div",13)(25,"div",10),t._uU(26),t.qZA(),t.TgZ(27,"div",11),t._uU(28,"Late"),t.qZA()()(),t.TgZ(29,"div",8)(30,"div",14)(31,"div",10),t._uU(32),t.qZA(),t.TgZ(33,"div",11),t._uU(34,"Absent"),t.qZA()()(),t.TgZ(35,"div",8)(36,"div",15)(37,"div",10),t._uU(38),t.qZA(),t.TgZ(39,"div",11),t._uU(40,"Pending"),t.qZA()()()(),t.TgZ(41,"div",16)(42,"div",17)(43,"select",18),t.NdJ("ngModelChange",function(p){return i.selectedDesignation=p}),t.TgZ(44,"option",19),t._uU(45,"All"),t.qZA(),t.YNc(46,_,2,2,"option",20),t.qZA()(),t.TgZ(47,"div",21)(48,"input",22),t.NdJ("ngModelChange",function(p){return i.searchTerm=p}),t.qZA()(),t.TgZ(49,"div",23)(50,"button",24),t.NdJ("click",function(){return i.openAddPopup()}),t.TgZ(51,"span",25),t._uU(52,"add"),t.qZA(),t.TgZ(53,"span",26),t._uU(54,"Add Employee"),t.qZA()()()(),t.YNc(55,b,18,3,"div",27),t.TgZ(56,"div",28),t._UZ(57,"i",29),t.TgZ(58,"span",30),t._uU(59),t.qZA()(),t.TgZ(60,"div",31)(61,"button",32),t.NdJ("click",function(){return i.markAllFiltered("Full Day")}),t._UZ(62,"i",33),t._uU(63," All Full Day "),t.qZA(),t.TgZ(64,"button",34),t.NdJ("click",function(){return i.markAllFiltered("Half Day")}),t._UZ(65,"i",35),t._uU(66," All Half Day "),t.qZA(),t.TgZ(67,"button",36),t.NdJ("click",function(){return i.markAllFiltered("Absent")}),t._UZ(68,"i",37),t._uU(69," All Absent "),t.qZA(),t.TgZ(70,"button",38),t.NdJ("click",function(){return i.clearAllFiltered()}),t._UZ(71,"i",39),t._uU(72," Clear All "),t.qZA()(),t.YNc(73,y,32,12,"div",40),t.TgZ(74,"div",41)(75,"div",42)(76,"button",43),t.NdJ("click",function(){return i.saveAttendance()}),t._UZ(77,"i",44),t._uU(78),t.qZA()()()()),2&e&&(t.xp6(6),t.Oqu(t.xi3(7,15,i.selectedDate,"fullDate")),t.xp6(8),t.Oqu(i.summary.fullDay),t.xp6(6),t.Oqu(i.summary.halfDay),t.xp6(6),t.Oqu(i.summary.late),t.xp6(6),t.Oqu(i.summary.absent),t.xp6(6),t.Oqu(i.summary.pending),t.xp6(5),t.Q6J("ngModel",i.selectedDesignation),t.xp6(3),t.Q6J("ngForOf",i.designations),t.xp6(2),t.Q6J("ngModel",i.searchTerm),t.xp6(7),t.Q6J("ngIf",i.isAddPopupOpen),t.xp6(4),t.hij("Mark all ",i.filteredEmployees.length," employees:"),t.xp6(14),t.Q6J("ngForOf",i.filteredEmployees)("ngForTrackBy",i.trackByEmployee),t.xp6(3),t.Q6J("disabled",0===i.totalMarked),t.xp6(2),t.hij(" Save Attendance (",i.totalMarked," marked) "))},dependencies:[u.mk,u.sg,u.O5,d.YN,d.Kr,d.Fj,d.EJ,d.JJ,d.On,u.uU],styles:[".attendance-page[_ngcontent-%COMP%]{font-family:Segoe UI,Helvetica Neue,Arial,sans-serif}.attendance-page[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{width:40px;height:40px;display:inline-flex;align-items:center;justify-content:center;border-radius:8px}.attendance-page[_ngcontent-%COMP%]   .summary-tile[_ngcontent-%COMP%]{min-height:66px;border-radius:12px;padding:.45rem .4rem;display:flex;flex-direction:column;justify-content:center;align-items:center}.attendance-page[_ngcontent-%COMP%]   .summary-tile[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]{font-weight:700;font-size:1.05rem}.attendance-page[_ngcontent-%COMP%]   .summary-tile[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:.78rem;color:#666}.attendance-page[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:44px;height:44px;border-radius:50%;background:#eef2f6;color:#2b3a45;display:inline-flex;align-items:center;justify-content:center;font-weight:600}.attendance-page[_ngcontent-%COMP%]   .btn-option[_ngcontent-%COMP%]{border-radius:10px;padding:.45rem .4rem;white-space:nowrap;font-size:.85rem}.attendance-page[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]{background:#5e6168;color:#fff;border-radius:12px;padding:.6rem .75rem;font-weight:600}.attendance-page[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]:disabled{background:#cfd3d8;color:#fff}.custom-badge[_ngcontent-%COMP%]{background-color:#393e3b!important;color:#fff!important}@media (max-width: 576px){.attendance-row[_ngcontent-%COMP%]   .col-6[_ngcontent-%COMP%]{flex:0 0 25%!important;max-width:25%!important}.custom-popup-content[_ngcontent-%COMP%]{width:100%;margin:0 16px;padding:16px}}.card-body[_ngcontent-%COMP%]{flex:1 1 auto;color:var(--bs-card-color);padding:12px!important}.custom-popup[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(241,234,234,.07);display:flex;align-items:center;justify-content:center;z-index:2000}.custom-popup-content[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:10px;width:100%;max-width:400px;box-shadow:0 2px 6px #0000004d;animation:_ngcontent-%COMP%_fadeIn .3s ease-in-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:scale(.9)}to{opacity:1;transform:scale(1)}}.selected-dates[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px}.date-box[_ngcontent-%COMP%]{display:flex;align-items:center;border:1px solid #ccc;padding:4px 10px;border-radius:6px;background:#f9f9f9;font-size:14px}.date-box[_ngcontent-%COMP%]   .number[_ngcontent-%COMP%]{font-weight:700;margin-right:5px;color:#007bff}.date-box[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{margin-right:8px}.date-box[_ngcontent-%COMP%]   .remove[_ngcontent-%COMP%]{color:red;cursor:pointer;font-weight:700}.selected-dates-vertical[_ngcontent-%COMP%]{max-height:200px;overflow-y:auto;border:1px solid #ddd;padding:6px;border-radius:6px;display:grid;grid-template-columns:1fr 1fr;gap:8px}.selected-dates-vertical[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.selected-dates-vertical[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#bbb;border-radius:4px}.date-box[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;border:1px solid #ccc;border-radius:6px;padding:6px 10px;background:#f8f9fa;font-size:14px;flex:1}.date-box[_ngcontent-%COMP%]   .number[_ngcontent-%COMP%]{font-weight:700;margin-right:6px;color:#0d6efd}.date-box[_ngcontent-%COMP%]   .remove[_ngcontent-%COMP%]{color:#dc3545;cursor:pointer;font-weight:700}.plus-icon[_ngcontent-%COMP%]{position:absolute;right:10px;top:50%;transform:translateY(-50%);cursor:pointer;font-size:18px;color:#0d6efd}.custom-popup[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.5);display:flex;align-items:center;justify-content:center;z-index:1050}.custom-popup-content[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:20px;width:350px;max-height:90vh;overflow-y:auto}"]}),s})()}];let A=(()=>{const a=class{};let s=a;return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[m.Bz.forChild(C),m.Bz]}),s})();var Z=r(4032);let T=(()=>{const a=class{};let s=a;return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[u.ez,A,Z.aw,d.u5,d.UX]}),s})()}}]);