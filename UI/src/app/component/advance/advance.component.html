<div class="container mt-3">
  <h3>Add Employee Advance</h3>

  <form [formGroup]="advanceForm" (ngSubmit)="onSubmit()">

    <!-- Employee Dropdown -->
    <div class="mb-3">
      <label class="form-label">Select Employee</label>
      <select class="form-select" formControlName="employeeId" (change)="onEmployeeSelect($event)">
        <option value="">-- Select --</option>
        <option *ngFor="let emp of employees" [value]="emp.employeeId">
          {{ emp.name }} ({{ emp.role }})
        </option>
      </select>
    </div>

    <!-- Auto Filled Employee Info -->
    <div *ngIf="selectedEmployee" class="card p-3 mb-3">
      <p><strong>Name:</strong> {{ selectedEmployee.name }}</p>
      <p><strong>Role:</strong> {{ selectedEmployee.role }}</p>
      <p><strong>PAN:</strong> {{ selectedEmployee.panCard }}</p>
      <p><strong>Aadhaar:</strong> {{ selectedEmployee.aadhaar }}</p>
      <p><strong>Factory:</strong> {{ selectedEmployee.factoryName }}</p>
    </div>

    <!-- Manual Fields -->
    <div class="mb-3">
      <label class="form-label">Reason</label>
      <input type="text" class="form-control" formControlName="reason" placeholder="Enter reason" />
    </div>

    <div class="mb-3">
      <label class="form-label">Payment Mode</label>
      <select class="form-select" formControlName="paymentMode">
        <option value="">-- Select Mode --</option>
        <option value="Cash">Cash</option>
        <option value="Online">Online</option>
        <option value="Cheque">Cheque</option>
      </select>
    </div>

    <div class="mb-3">
      <label class="form-label">Amount</label>
      <input type="number" class="form-control" formControlName="amount" />
    </div>

    <div class="mb-3">
      <label class="form-label">Date</label>
      <input type="date" class="form-control" formControlName="date" />
    </div>

    <!-- Submit -->
    <button type="submit" class="btn btn-primary" [disabled]="advanceForm.invalid">Save</button>
  </form>
</div>
