<div class="container">
  <h2 class="title">Employee Advances</h2>

  <!-- ✅ Search Input -->
  <div class="d-flex gap-2 mb-3">
    <input type="text" class="form-control"
           placeholder="Search Employee Name..."
           [(ngModel)]="searchQuery"
           (input)="onSearchChange()" />
    <button class="btn btn-outline-secondary" (click)="resetSearch()">Reset</button>
  </div>

  <!-- ✅ Popup for search results -->
  <div *ngIf="showPopup" class="search-popup card shadow-sm">
    <ul class="list-group list-group-flush">
      <li *ngFor="let emp of searchResults"
          class="list-group-item list-group-item-action"
          (click)="selectEmployee(emp)">
        {{ emp.name }} (ID: {{ emp.id }})
      </li>
    </ul>
  </div>

  <!-- ✅ Success / Error Alerts -->
  <div *ngIf="successMessage" class="alert alert-success">{{ successMessage }}</div>
  <div *ngIf="errorMessage" class="alert alert-danger">{{ errorMessage }}</div>

  <!-- ✅ Table for Transactions -->
  <div class="table-responsive mt-3">
    <table class="table table-striped table-hover shadow-sm">
      <thead class="table-dark">
        <tr>
          <th>ID</th>
          <th>Employee</th>
          <th>Reason</th>
          <th>Payment Mode</th>
          <th>Amount</th>
          <th>Date</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let t of filteredTransactions">
          <td>{{ t.advanceId }}</td>
          <td>{{ getEmployeeName(t.employeeId) }}</td>
          <td>{{ t.reason }}</td>
          <td>{{ t.paymentMode }}</td>
          <td>{{ t.amount | currency }}</td>
          <td>{{ t.date | date: 'short' }}</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
