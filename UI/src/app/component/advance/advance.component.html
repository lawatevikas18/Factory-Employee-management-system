<div class="container">
  <h2 class="title">Employee Advances</h2>

  <!-- ✅ Alerts -->
  <div *ngIf="successMessage" class="alert alert-success">{{ successMessage }}</div>
  <div *ngIf="errorMessage" class="alert alert-danger">{{ errorMessage }}</div>

  <!-- ✅ Filter -->
  <div class="mb-3">
    <input
      type="text"
      class="form-control"
      placeholder="Search by employee name..."
      [(ngModel)]="searchText"
      (input)="filterEmployees()"
    /> 
  </div>

  <!-- ✅ Employee Table -->
  <div class="table-responsive">
    <table class="table table-bordered table-hover shadow-sm">
      <thead class="table-dark">
        <tr>
          <th>Name</th>
          <th>Mobile</th>
          <th>Advance Balance</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>

    
        <tr *ngFor="let emp of filteredEmployees">
          <td>{{ emp.name }}</td>
          <td>{{ emp.mobile1 }}</td>
          <td>{{ emp.advanceBalance | currency }}</td>
          <td>
            <button class="btn btn-sm btn-primary" (click)="selectEmployee(emp)">
              Select
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- ✅ Advance Form -->
  <div class="card shadow p-3 mt-4">
    <h4>Send Advance</h4>
    <form [formGroup]="advanceForm" (ngSubmit)="onSubmit()">
      <div class="mb-3">
        <label>Employee ID</label>
        <input type="number" class="form-control" formControlName="employeeId" readonly />
      </div>

      <div class="mb-3">
        <label>Reason</label>
        <input type="text" class="form-control" formControlName="reason" />
      </div>

      <div class="mb-3">
        <label>Payment Mode</label>
        <select class="form-select" formControlName="paymentMode">
          <option value="Cash">Cash</option>
          <option value="Bank Transfer">Bank Transfer</option>
          <option value="UPI">UPI</option>
        </select>
      </div>

      <div class="mb-3">
        <label>Amount</label>
        <input type="number" class="form-control" formControlName="amount" />
      </div>

      <button class="btn btn-success w-100" [disabled]="advanceForm.invalid">
        Send Advance
      </button>
    </form>
  </div>
</div>
