<div class="container mt-4">
  <h2 class="mb-3">Employee Management</h2>

  <div *ngIf="message" class="alert alert-success">{{ message }}</div>
  <div *ngIf="error" class="alert alert-danger">{{ error }}</div>

  <form [formGroup]="employeeForm" (ngSubmit)="submit()">
    <div class="row g-3">
      <div class="col-md-6">
        <label class="form-label">Name</label>
        <input formControlName="name" class="form-control" />
      </div>
      <div class="col-md-6">
        <label class="form-label">Address</label>
        <input formControlName="address" class="form-control" />
      </div>
      <div class="col-md-4">
        <label class="form-label">Village</label>
        <input formControlName="village" class="form-control" />
      </div>
      <div class="col-md-4">
        <label class="form-label">Taluka</label>
        <input formControlName="taluka" class="form-control" />
      </div>
      <div class="col-md-4">
        <label class="form-label">District</label>
        <input formControlName="district" class="form-control" />
      </div>
      <div class="col-md-4">
        <label class="form-label">State</label>
        <input formControlName="state" class="form-control" />
      </div>
      <div class="col-md-4">
        <label class="form-label">Role</label>
        <input formControlName="role" class="form-control" />
      </div>
      <div class="col-md-4">
        <label class="form-label">Aadhaar</label>
        <input formControlName="aadhaar" class="form-control" />
      </div>
      <div class="col-md-4">
        <label class="form-label">PAN</label>
        <input formControlName="panCard" class="form-control" />
      </div>
      <div class="col-md-4">
        <label class="form-label">Mobile 1</label>
        <input formControlName="mobile1" class="form-control" />
      </div>
      <div class="col-md-4">
        <label class="form-label">Mobile 2</label>
        <input formControlName="mobile2" class="form-control" />
      </div>
      <div class="col-md-4">
        <label class="form-label">Monthly Salary</label>
        <input formControlName="monthlySalary" type="number" class="form-control" />
      </div>

      <!-- ✅ Image Upload -->
      <div class="col-md-6">
        <label class="form-label">Photo</label>
        <input type="file" class="form-control" (change)="onFileSelected($event)" />
        <div *ngIf="selectedEmployee?.imagePath" class="mt-2">
          <img [src]="apiUrl + selectedEmployee.imagePath" width="80" height="80" class="rounded">
        </div>
      </div>
    </div>

    <div class="mt-3">
      <button class="btn btn-primary" type="submit">{{ isEdit ? 'Update' : 'Add' }} Employee</button>
      <button class="btn btn-secondary ms-2" type="button" (click)="resetForm()">Reset</button>
    </div>
  </form>

  <hr />

  <!-- ✅ Employee List -->
  <h3>Employees</h3>
  <table class="table table-bordered mt-2">
    <thead>
      <tr>
        <th>Name</th>
        <th>Aadhaar</th>
        <th>Mobile</th>
        <th>Salary</th>
        <th>Photo</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let emp of employees">
        <td>{{ emp.name }}</td>
        <td>{{ emp.aadhaar }}</td>
        <td>{{ emp.mobile1 }}</td>
        <td>{{ emp.monthlySalary }}</td>
        <td>
          <img *ngIf="emp.imagePath" [src]="apiUrl + emp.imagePath" width="60" height="60" class="rounded">
        </td>
        <td>
          <button class="btn btn-sm btn-warning me-2" (click)="editEmployee(emp)">Edit</button>
          <button class="btn btn-sm btn-danger" (click)="deleteEmployee(emp.employeeId)">Delete</button>
        </td>
      </tr>
    </tbody>
  </table>
</div>
